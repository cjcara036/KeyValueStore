<div class="markdown prose w-full break-words dark:prose-invert light">
  <h1>KeyValueStore</h1><p>A JavaScript class that provides an interface to store and retrieve key-value pairs in an IndexedDB database, with the added benefit of a cache to improve read performance.</p><h2>Installation</h2><p>To use the <code>KeyValueStore</code> class in your project, include the <code>KeyValueStore.js</code> file in your HTML file using a script tag.</p><pre><div class="bg-black mb-4 rounded-md"><div class="flex items-center relative text-gray-200 bg-gray-800 px-4 py-2 text-xs font-sans"><button class="flex ml-auto gap-2"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg></div><div class="p-4 overflow-y-auto"><code class="!whitespace-pre-wrap hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://raw.githubusercontent.com/cjcara036/KeyValueStore/main/KeyValueStore_r0p02.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></div></div></pre><h2>Usage</h2><p>To create a new <code>KeyValueStore</code> object:</p><pre><div class="bg-black mb-4 rounded-md"><div class="flex items-center relative text-gray-200 bg-gray-800 px-4 py-2 text-xs font-sans"><button class="flex ml-auto gap-2"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg></div><div class="p-4 overflow-y-auto"><code class="!whitespace-pre-wrap hljs language-javascript"><span class="hljs-keyword">const</span> kvs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">KeyValueStore</span>(nameDB, func_rcvErr, <span class="hljs-variable constant_">MAX_CACHE_SIZE</span>=<span class="hljs-number">1024</span>);
</code></div></div></pre><p>where:</p><ul><li><code>nameDB</code> is the name given to the IndexedDB database that will be created by the <code>KeyValueStore</code> object.</li><li><code>func_rcvErr</code> is the error-handling function for the <code>KeyValueStore</code> object. This function should have a single parameter, which will be an <code>Error</code> object.</li><li><code>MAX_CACHE_SIZE</code> (optional) is the maximum number of key-value pairs that the cache can hold. The default value is 1024.</li></ul><p>To store key-value pairs in the <code>KeyValueStore</code> object:</p><pre><div class="bg-black mb-4 rounded-md"><div class="flex items-center relative text-gray-200 bg-gray-800 px-4 py-2 text-xs font-sans"><button class="flex ml-auto gap-2"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg></div><div class="p-4 overflow-y-auto"><code class="!whitespace-pre-wrap hljs language-javascript"><span class="hljs-keyword">await</span> kvs.<span class="hljs-title function_">setKV</span>(keyValueMap);
</code></div></div></pre><p>where <code>keyValueMap</code> is a <code>Map</code> object containing the key-value pairs to be stored.</p><p>To retrieve key-value pairs from the <code>KeyValueStore</code> object:</p><pre><div class="bg-black mb-4 rounded-md"><div class="flex items-center relative text-gray-200 bg-gray-800 px-4 py-2 text-xs font-sans"><button class="flex ml-auto gap-2"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg></div><div class="p-4 overflow-y-auto"><code class="!whitespace-pre-wrap hljs language-javascript"><span class="hljs-keyword">const</span> resultMap = <span class="hljs-keyword">await</span> kvs.<span class="hljs-title function_">getKV</span>(keys);
</code></div></div></pre><p>where <code>keys</code> is an array of keys and <code>resultMap</code> is a <code>Map</code> object containing all of the matching key-value pairs.</p><h2>Example</h2><p>Here is an example of how to use the <code>KeyValueStore</code> class to store and retrieve key-value pairs:</p><pre><div class="bg-black mb-4 rounded-md"><div class="flex items-center relative text-gray-200 bg-gray-800 px-4 py-2 text-xs font-sans"><button class="flex ml-auto gap-2"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg></div><div class="p-4 overflow-y-auto"><code class="!whitespace-pre-wrap hljs language-javascript"><span class="hljs-keyword">const</span> kvs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">KeyValueStore</span>(<span class="hljs-string">"myDB"</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error); });

<span class="hljs-comment">// Store some key-value pairs in the database</span>
<span class="hljs-keyword">const</span> keyValueMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>([
  [<span class="hljs-string">"key1"</span>, <span class="hljs-string">"value1"</span>],
  [<span class="hljs-string">"key2"</span>, <span class="hljs-string">"value2"</span>],
  [<span class="hljs-string">"key3"</span>, <span class="hljs-string">"value3"</span>],
]);
<span class="hljs-keyword">await</span> kvs.<span class="hljs-title function_">setKV</span>(keyValueMap);

<span class="hljs-comment">// Retrieve the value for key1</span>
<span class="hljs-keyword">const</span> resultMap = <span class="hljs-keyword">await</span> kvs.<span class="hljs-title function_">getKV</span>([<span class="hljs-string">"key1"</span>]);
<span class="hljs-keyword">const</span> value1 = resultMap.<span class="hljs-title function_">get</span>(<span class="hljs-string">"key1"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value1); <span class="hljs-comment">// Output: "value1"</span>

<span class="hljs-comment">// Retrieve the values for key1 and key2</span>
<span class="hljs-keyword">const</span> resultMap = <span class="hljs-keyword">await</span> kvs.<span class="hljs-title function_">getKV</span>([<span class="hljs-string">"key1"</span>, <span class="hljs-string">"key2"</span>]);
<span class="hljs-keyword">const</span> value1 = resultMap.<span class="hljs-title function_">get</span>(<span class="hljs-string">"key1"</span>);
<span class="hljs-keyword">const</span> value2 = resultMap.<span class="hljs-title function_">get</span>(<span class="hljs-string">"key2"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value1, value2); <span class="hljs-comment">// Output: "value1" "value2"</span>
</code></div></div></pre>
